(()=>{"use strict";const e="http://localhost:9000",t=async(t="")=>(t=e+t,await fetch(t).then((e=>e.json())));(()=>{const n=document.querySelector("#table tbody"),a=document.querySelector("#post"),r=document.querySelector("#patch"),s=document.querySelector("#delete"),u={username:null,body:null,email:void 0},l=document.querySelector("#user-name"),d=document.querySelector("#user-email"),o=document.querySelector("#user-comment"),c=document.querySelector("#user-id");l.addEventListener("input",(()=>{u.username=l.value})),d.addEventListener("input",(()=>{u.email=d.value})),o.addEventListener("input",(()=>{u.body=o.value})),a.addEventListener("input",(()=>{u.body=o.value})),n.innerHTML="<tr><td>Loading...</td></tr>",t("/users").then((e=>{n.innerHTML="",e.forEach(((e,t)=>{t+=1,n.insertAdjacentHTML("beforeend",`\n                <tr>\n                    <th scope="row">${t}</th>\n                    <td>${e.username}</td>\n                    <td>${e.email}</td>\n                    <td>${e.body}</td>\n                    <td>\n                        <button class="btn btn-warning" data-user-patch-id="${e.id}">Patch</button>\n                    </td>\n                    <td>\n                        <button class="btn btn-danger" data-user-delete-id="${e.id}">Delete</button>\n                    </td>\n                </tr>\n            `)}));const a=document.querySelectorAll("[data-user-patch-id]"),r=document.querySelectorAll("[data-user-delete-id]");(a&&a?.lenght||r&&r?.lenght)&&a.forEach((e=>{e.addEventListener("click",(e=>{const n=e.target.dataset.userPatchId;console.log(n),""==d.value||""==o.value||""==l.value?t(`/users/${n}`).then((e=>{o.value=e.body,d.value=e.email,l.value=e.username,c.value=e.id})):RequestPut(`/users/${n}`,u).then((()=>{alert("Updated")})).catch((e=>{alert(`Xatolik: ${e.message}`),console.error(e)}))}))}))})),a.addEventListener("click",(()=>{(async(t="",n={})=>(t=e+t,await fetch(t,{method:"POST",body:JSON.stringify(n),headers:{"Content-type":"application/json"}}).then((e=>e.json()))))("/users",u).then((()=>{alert("POSTED")})).catch((e=>{alert(`sizning Xatoingiz: ${e.message} `),console.error(e)}))})),r.addEventListener("click",(()=>{""==l.value||""==d.value||""==o.value?t(`/users/${c.value}`).then((e=>{l.value=e.username,d.value=e.email,o.value=e.body})):RequestPut(`/users/${InputUserId.value}`,u).then((()=>{alert("PATCHED")})).catch((e=>{alert(`sizning Xatoingiz: ${e.message} `),console.error(e)}))})),s.addEventListener("click",(()=>{(async(t="")=>(t=e+t,await fetch(t,{method:"DELETE"}).then((e=>e.json()))))(`/users/${c.value}`).then((()=>{alert("DELETED")})).catch((e=>{alert(`Xatolik: ${e.message}`),console.error(e)}))}))})()})();